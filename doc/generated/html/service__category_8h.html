<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AP Service Publisher: service_category.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>service_category.h File Reference</h1>The <a class="el" href="structservice.html">service</a> category module. This module is thread-safe and fork-safe as long as each thread and each child process load their own <a class="el" href="structservice.html">service</a> list (i.e., the <a class="el" href="structservice.html">service</a> list object must not be passed from one thread to another or from a parent process to its child). And, it is good to reset the category list before navigating it to get the latest update to the underlying DB. In the future, an event listener may be available to make this more efficient. The geometry of the hierarchical structure of a category list is a tree whose root is only logical and not present in the list. The children of the logical root are the top-level categories. Upon obtaining a <a class="el" href="structservice.html">service</a> category list using either <a class="el" href="service__category_8h.html#4f54917033fb9e1ad6810c18f55ad2ef">load_flat_cat_list()</a> or <a class="el" href="service__category_8h.html#ea93a3c7ccb1c48660f6ed198db14729">load_cat_list()</a>, or after resetting a <a class="el" href="structservice.html">service</a> category list with <a class="el" href="service__category_8h.html#19f63eb11677f61c05dd42f03018179d">reset()</a>, the internal iterator is before the first category if the list is flat or before the first top-level category if the list is hierarchical that means that <a class="el" href="service__category_8h.html#7b5a52e998daed030d9cf4e76fd9ea8a">get_cat()</a>, <a class="el" href="service__category_8h.html#1cd22c89db9382d30ff257833ab5376b">prev()</a>, <a class="el" href="service__category_8h.html#63e61050101cfac35371aac243ea02b4">go_sup()</a> and <a class="el" href="service__category_8h.html#ad0f4bda7951e23c95f58ce557d8778d">go_sub()</a> will indicate that there is no category unless <a class="el" href="service__category_8h.html#4027472a008ee0e28517c4b53fd66a23">next()</a> has been executed to move the internal iterator to the first (top-level) category.  
<a href="#_details">More...</a>
<p>

<p>
<a href="service__category_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcat.html">cat</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4999432fed11aedfd2b07e92228613f3"></a><!-- doxytag: member="service_category.h::CATEGORY_LIST_DB" ref="4999432fed11aedfd2b07e92228613f3" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CATEGORY_LIST_DB</b>&nbsp;&nbsp;&nbsp;&quot;./category_list.db&quot;</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#4f54917033fb9e1ad6810c18f55ad2ef">load_flat_cat_list</a> (cat_list **cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#ea93a3c7ccb1c48660f6ed198db14729">load_cat_list</a> (cat_list **cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#aa4a1b8440b32ddd8fe638be8c699904">destroy_cat_list</a> (cat_list **cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#4027472a008ee0e28517c4b53fd66a23">next</a> (cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#1cd22c89db9382d30ff257833ab5376b">prev</a> (cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#ad0f4bda7951e23c95f58ce557d8778d">go_sub</a> (cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#63e61050101cfac35371aac243ea02b4">go_sup</a> (cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#19f63eb11677f61c05dd42f03018179d">reset</a> (cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structcat.html">cat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#7b5a52e998daed030d9cf4e76fd9ea8a">get_cat</a> (const cat_list *cl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__category_8h.html#c019be18beb6357fb0447b25b5b211dd">update_cat_list</a> (const char *sql_statements)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="structservice.html">service</a> category module. This module is thread-safe and fork-safe as long as each thread and each child process load their own <a class="el" href="structservice.html">service</a> list (i.e., the <a class="el" href="structservice.html">service</a> list object must not be passed from one thread to another or from a parent process to its child). And, it is good to reset the category list before navigating it to get the latest update to the underlying DB. In the future, an event listener may be available to make this more efficient. The geometry of the hierarchical structure of a category list is a tree whose root is only logical and not present in the list. The children of the logical root are the top-level categories. Upon obtaining a <a class="el" href="structservice.html">service</a> category list using either <a class="el" href="service__category_8h.html#4f54917033fb9e1ad6810c18f55ad2ef">load_flat_cat_list()</a> or <a class="el" href="service__category_8h.html#ea93a3c7ccb1c48660f6ed198db14729">load_cat_list()</a>, or after resetting a <a class="el" href="structservice.html">service</a> category list with <a class="el" href="service__category_8h.html#19f63eb11677f61c05dd42f03018179d">reset()</a>, the internal iterator is before the first category if the list is flat or before the first top-level category if the list is hierarchical that means that <a class="el" href="service__category_8h.html#7b5a52e998daed030d9cf4e76fd9ea8a">get_cat()</a>, <a class="el" href="service__category_8h.html#1cd22c89db9382d30ff257833ab5376b">prev()</a>, <a class="el" href="service__category_8h.html#63e61050101cfac35371aac243ea02b4">go_sup()</a> and <a class="el" href="service__category_8h.html#ad0f4bda7951e23c95f58ce557d8778d">go_sub()</a> will indicate that there is no category unless <a class="el" href="service__category_8h.html#4027472a008ee0e28517c4b53fd66a23">next()</a> has been executed to move the internal iterator to the first (top-level) category. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="aa4a1b8440b32ddd8fe638be8c699904"></a><!-- doxytag: member="service_category.h::destroy_cat_list" ref="aa4a1b8440b32ddd8fe638be8c699904" args="(cat_list **cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_cat_list           </td>
          <td>(</td>
          <td class="paramtype">cat_list **&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Frees the memory allocated through <a class="el" href="service__category_8h.html#ea93a3c7ccb1c48660f6ed198db14729">load_cat_list()</a> or <a class="el" href="service__category_8h.html#4f54917033fb9e1ad6810c18f55ad2ef">load_flat_cat_list()</a> and sets the pointer to NULL as a safe guard. Passing a pointer to NULL is okay but not a NULL pointer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list to be freed. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="7b5a52e998daed030d9cf4e76fd9ea8a"></a><!-- doxytag: member="service_category.h::get_cat" ref="7b5a52e998daed030d9cf4e76fd9ea8a" args="(const cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcat.html">cat</a>* get_cat           </td>
          <td>(</td>
          <td class="paramtype">const cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the category under the internal iterator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list to be read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the category under the internal iterator or NULL if the internal iterator is not over any category. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ad0f4bda7951e23c95f58ce557d8778d"></a><!-- doxytag: member="service_category.h::go_sub" ref="ad0f4bda7951e23c95f58ce557d8778d" args="(cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int go_sub           </td>
          <td>(</td>
          <td class="paramtype">cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Moves the internal iterator to the subcategory of the category under the internal iterator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list whose internal iterator is to be updated.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no subcategory or the internal iterator is not over any category or the list is flat, -1 if there is a subcategory, or a positive integer if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="63e61050101cfac35371aac243ea02b4"></a><!-- doxytag: member="service_category.h::go_sup" ref="63e61050101cfac35371aac243ea02b4" args="(cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int go_sup           </td>
          <td>(</td>
          <td class="paramtype">cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Moves the internal iterator to the parent category of the category under the internal iterator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list whose internal iterator is to be updated.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no parent category or the internal iterator is not over any category or the list is flat, -1 if there is a parent category, or a positive integer if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ea93a3c7ccb1c48660f6ed198db14729"></a><!-- doxytag: member="service_category.h::load_cat_list" ref="ea93a3c7ccb1c48660f6ed198db14729" args="(cat_list **cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_cat_list           </td>
          <td>(</td>
          <td class="paramtype">cat_list **&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loads the currently available categories to be read in a hierarchical manner. The list is detached from the underlying DB so that any change to the underlying DB will not be seen by the list unless the list is reset.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the pointer pointing to a dynamically allocated memory that should be freed with <a class="el" href="service__category_8h.html#aa4a1b8440b32ddd8fe638be8c699904">destroy_cat_list()</a>.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no error or non-zero if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4f54917033fb9e1ad6810c18f55ad2ef"></a><!-- doxytag: member="service_category.h::load_flat_cat_list" ref="4f54917033fb9e1ad6810c18f55ad2ef" args="(cat_list **cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_flat_cat_list           </td>
          <td>(</td>
          <td class="paramtype">cat_list **&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loads the currently available categories to be read without considering the hierarchical structure. The list is detached from the underlying DB so that any change to the underlying DB will not be seen by the list unless the list is reset.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the pointer pointing to a dynamically allocated memory that should be freed with <a class="el" href="service__category_8h.html#aa4a1b8440b32ddd8fe638be8c699904">destroy_cat_list()</a>.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no error or non-zero if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4027472a008ee0e28517c4b53fd66a23"></a><!-- doxytag: member="service_category.h::next" ref="4027472a008ee0e28517c4b53fd66a23" args="(cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int next           </td>
          <td>(</td>
          <td class="paramtype">cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Moves the internal iterator to the next category in the same subcategory. Or, if the category list is flat, the internal iterator will move to the next available category.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list whose internal iterator is to be updated.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no next category or the list is empty, -1 if there is a next category, or a positive integer if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1cd22c89db9382d30ff257833ab5376b"></a><!-- doxytag: member="service_category.h::prev" ref="1cd22c89db9382d30ff257833ab5376b" args="(cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prev           </td>
          <td>(</td>
          <td class="paramtype">cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Moves the internal iterator to the previous category in the same subcategory. Or, if the category list is flat, the internal iterator will move to the previous available category.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list whose internal iterator is to be updated.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no previous category or the internal iterator is not over any category, -1 if there is a previous category, or a positive integer if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="19f63eb11677f61c05dd42f03018179d"></a><!-- doxytag: member="service_category.h::reset" ref="19f63eb11677f61c05dd42f03018179d" args="(cat_list *cl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int reset           </td>
          <td>(</td>
          <td class="paramtype">cat_list *&nbsp;</td>
          <td class="paramname"> <em>cl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Resets the internal iterator of the given category list as well as refreshing the list data by re-reading the underlying DB.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cl</em>&nbsp;</td><td>the category list whose internal iterator will be reset.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no error or non-zero if there is an error. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c019be18beb6357fb0447b25b5b211dd"></a><!-- doxytag: member="service_category.h::update_cat_list" ref="c019be18beb6357fb0447b25b5b211dd" args="(const char *sql_statements)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_cat_list           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>sql_statements</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Updates the category list database. The update will not be visible to a category list that is created before the update and has not been reset.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>sql_statements</em>&nbsp;</td><td>the update data as provided by the central category database.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if there is no error or non-zero if there is one. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Apr 23 21:13:47 2010 for AP Service Publisher by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
